<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asignación de Aulas</title>
    <link rel="stylesheet" href="../../assets/css/dashboard/principal.css">
    <link rel="stylesheet" href="../../assets/css/dashboard/usuarios-roles.css">
</head>
<body>
    <div id="header-container"></div>
    <div class="breadcrumb-bar">
        <div class="breadcrumb-inner with-border">
            <div class="breadcrumb-path" id="breadcrumb-path">/Inicio</div>
            <div class="breadcrumb-role" id="breadcrumb-role"></div>
        </div>
    </div>

    <!-- Modal formulario de aula -->
    <div class="modal modal-aula" id="aulaFormModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Nueva aula</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <div id="aulaMessage" class="message" style="display:none;"></div>
                <form id="aulaForm" class="materia-form">
                    <input type="hidden" id="aula_id">
                    <div class="form-row split-row">
                        <div class="form-control sigla-control">
                            <label for="aula_sigla">Sigla del aula</label>
                            <input id="aula_sigla" type="text" placeholder="Ej: C101" maxlength="12" required>
                        </div>
                        <div class="form-control">
                            <label for="aula_capacidad">Capacidad</label>
                            <input id="aula_capacidad" type="number" min="1" step="1" placeholder="Ej: 80" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Horarios (Admin - clases_horarios) -->
    <div class="modal modal-add-class" id="adminHorarioModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="adminHorarioModalTitle">Editar horario de aula</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <form id="adminHorarioForm" class="modal-body">
                <div id="adminHorarioMessage" class="message" style="display:none;"></div>
                <input type="hidden" id="adminHorarioId">
                <input type="hidden" id="adminHorarioDia">
                <input type="hidden" id="adminHorarioSlotIndex">
                <div class="form-group slot-summary">
                    <label>Bloque seleccionado</label>
                    <div id="adminHorarioResumen" class="slot-tag">Selecciona un bloque en el horario</div>
                </div>

                <div class="form-group">
                    <label for="adminHorarioDiaLabel">Día</label>
                    <input id="adminHorarioDiaLabel" type="text" disabled>
                </div>

                <div class="form-group">
                    <label for="adminHorarioAula">Aula</label>
                    <input id="adminHorarioAula" type="text" required>
                </div>

                <div class="form-group">
                    <label for="adminHorarioMateria">Materia</label>
                    <input id="adminHorarioMateria" type="text" required>
                </div>

                <div class="form-group">
                    <label for="adminHorarioGrupo">Grupo / código</label>
                    <input id="adminHorarioGrupo" type="text">
                </div>

                <div class="form-group">
                    <label for="adminHorarioDocente">Docente</label>
                    <input id="adminHorarioDocente" type="text" required>
                </div>

                <div class="form-group">
                    <div class="time-inputs">
                        <div>
                            <label for="adminHorarioHoraInicio">Hora Inicio</label>
                            <input id="adminHorarioHoraInicio" type="time" required>
                        </div>
                        <div>
                            <label for="adminHorarioHoraFin">Hora Fin</label>
                            <input id="adminHorarioHoraFin" type="time" required>
                        </div>
                    </div>
                </div>
            </form>
            <div class="modal-footer space-between">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <div style="display:flex; gap:8px;">
                    <button type="button" class="btn btn-secondary" id="adminHorarioDeleteBtn" style="display:none;">Eliminar</button>
                    <button type="submit" form="adminHorarioForm" class="btn btn-primary" id="adminHorarioSaveBtn">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal modal-aux-materias" id="manageAuxMateriasModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="manageAuxMateriasTitle">Gestionar materias del auxiliar</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <div id="manageAuxMateriasMessage" class="message" style="display:none;"></div>
                <div class="users-table-wrapper" style="margin-bottom: 16px;">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Sigla</th>
                                <th>Materia</th>
                                <th>Grupo</th>
                                <th>Carga</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="manageAuxMateriasList"></tbody>
                    </table>
                </div>
                <form id="auxMateriaForm" class="materia-form">
                    <div class="form-row">
                        <span id="auxMateriaFormMode" class="form-mode-label">Añadiendo nueva materia para el auxiliar</span>
                    </div>
                    <div class="form-row split-row">
                        <div class="form-control">
                            <label for="auxMateriaGlobalSelect">Materia global</label>
                            <input id="auxMateriaGlobalSelect" type="text" list="auxMateriaGlobalList" placeholder="Ej: MAT103 - Álgebra II" required>
                            <datalist id="auxMateriaGlobalList"></datalist>
                        </div>
                        <div class="form-control">
                            <label for="auxMateriaGrupo">Grupo</label>
                            <input id="auxMateriaGrupo" type="text" placeholder="Ej: G1" required>
                        </div>
                    </div>
                    <div class="form-row split-row">
                        <div class="form-control">
                            <label for="auxMateriaVeces">Veces por semana</label>
                            <input id="auxMateriaVeces" type="number" min="1" value="2">
                        </div>
                        <div class="form-control">
                            <label for="auxMateriaHoras">Horas por clase</label>
                            <input id="auxMateriaHoras" type="number" min="1" value="2">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="auxMateriaCancelBtn">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="auxMateriaSubmitBtn">Guardar asignación</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal confirmar quitar materia de auxiliar -->
    <div class="modal modal-confirm" id="confirmDeleteAuxMateriaModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Quitar materia del auxiliar</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteAuxMateriaText">¿Deseas quitar esta materia del auxiliar?</p>
                <div id="confirmDeleteAuxMateriaMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteAuxMateria">Quitar</button>
            </div>
        </div>
    </div>

    <!-- Modal confirmar eliminación de aula -->
    <div class="modal modal-confirm" id="confirmDeleteAulaModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Eliminar aula</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteAulaText">¿Deseas eliminar esta aula?</p>
                <div id="confirmDeleteAulaMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteAula">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal formulario de materia global -->
    <div class="modal modal-materia" id="materiaGlobalFormModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Nueva materia</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <div id="materiaGlobalMessage" class="message" style="display:none;"></div>
                <form id="materiaGlobalForm" class="materia-form">
                    <input type="hidden" id="materia_global_id">
                    <div class="form-row split-row">
                        <div class="form-control">
                            <label for="materia_global_nombre">Nombre de la materia</label>
                            <input id="materia_global_nombre" type="text" placeholder="Ej: Álgebra I" required>
                        </div>
                        <div class="form-control sigla-control">
                            <label for="materia_global_sigla">Sigla</label>
                            <input id="materia_global_sigla" type="text" placeholder="Ej: MAT101" maxlength="12" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <label for="materia_global_color">Color</label>
                        <input type="color" id="materia_global_color" value="#2196F3">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="materiaGlobalSaveBtn">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal confirmar eliminación de materia global -->
    <div class="modal modal-confirm" id="confirmDeleteMateriaGlobalModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Eliminar materia</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteMateriaGlobalText">¿Deseas eliminar esta materia?</p>
                <div id="confirmDeleteMateriaGlobalMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteMateriaGlobal">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal confirmar desinscripción de auxiliatura (estudiante/auxiliar) -->
    <div class="modal modal-confirm" id="confirmQuitAuxiliaturaModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Quitarme de la auxiliatura</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmQuitAuxText">¿Deseas quitarte de esta auxiliatura?</p>
                <div id="confirmQuitAuxMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmQuitAux">Quitarme</button>
            </div>
        </div>
    </div>

    <div class="modal modal-confirm" id="votacionSlotModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2 id="votacionSlotModalTitle">Votar en este horario</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="votacionSlotModalDescription"></p>
                <div id="votacionSlotModalInfo" class="slot-tag" style="margin-top: 8px;"></div>
                <div id="votacionSlotModalMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnVotacionSlotDelete" style="display:none;">Eliminar voto</button>
                <button type="button" class="btn btn-primary" id="btnVotacionSlotConfirm">Votar aquí</button>
            </div>
        </div>
    </div>

    <!-- Sección: Usuarios y Roles (Admin) -->
    <section id="adminUsersRolesSection" class="admin-users-roles-section" hidden>
        <div class="users-panel">
            <div class="users-toolbar">
                <div class="filters">
                    <button class="filter-chip active" data-role="all">Todos</button>
                    <button class="filter-chip" data-role="student">Estudiantes</button>
                    <button class="filter-chip" data-role="assistant">Auxiliares</button>
                    <button class="filter-chip" data-role="admin">Administradores</button>
                </div>
                <div class="search">
                    <div class="search-input-wrapper">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill="currentColor" d="M21 21l-4.3-4.3m1.8-4.5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input id="usersSearchInput" type="text" placeholder="Buscar usuarios..." />
                    </div>
                </div>
                <button id="btnNuevoUsuario" class="toolbar-btn primary">Nuevo</button>
            </div>

            <div class="users-table-wrapper">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>N°</th>
                            <th>Nombre</th>
                            <th>Correo</th>
                            <th>Carrera</th>
                            <th>Rol</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody"></tbody>
                </table>
            </div>

            <div id="usersPagination" class="pagination"></div>
        </div>
    </section>

    <!-- Sección: Aulas (Admin) -->
    <section id="adminAulasSection" class="admin-users-roles-section" hidden>
        <div class="users-panel">
            <div class="users-toolbar">
                <div class="search">
                    <div class="search-input-wrapper">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill="currentColor" d="M21 21l-4.3-4.3m1.8-4.5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input id="aulasSearchInput" type="text" placeholder="Buscar aulas..." />
                    </div>
                </div>
                <button id="btnNuevaAula" class="toolbar-btn primary">Nueva aula</button>
            </div>

            <div class="users-table-wrapper">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>N°</th>
                            <th>Sigla</th>
                            <th>Capacidad</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="aulasTableBody"></tbody>
                </table>
            </div>

            <div id="aulasInlineMessage" class="message" style="display:none;"></div>
            <div id="aulasPagination" class="pagination"></div>
        </div>
    </section>

    <!-- Sección: Carreras (Admin) -->
    <section id="adminCarrerasSection" class="admin-users-roles-section" hidden>
        <div class="users-panel">
            <div class="users-toolbar">
                <div class="search">
                    <div class="search-input-wrapper">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill="currentColor" d="M21 21l-4.3-4.3m1.8-4.5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input id="carrerasSearchInput" type="text" placeholder="Buscar carreras..." />
                    </div>
                </div>
                <button id="btnNuevaCarreraModal" class="toolbar-btn primary">Nueva carrera</button>
            </div>

            <div class="users-table-wrapper">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>N°</th>
                            <th>Carrera</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="carrerasList"></tbody>
                </table>
            </div>

            <div id="carrerasInlineMessage" class="message" style="display:none;"></div>
            <div id="carrerasPagination" class="pagination"></div>
        </div>
    </section>

    <!-- Sección: Materias globales (Admin) -->
    <section id="adminMateriasGlobalesSection" class="admin-materias-globales-section" hidden>
        <div class="materias-panel">
            <div class="materias-toolbar">
                <div class="search">
                    <div class="search-input-wrapper">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill="currentColor" d="M21 21l-4.3-4.3m1.8-4.5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input id="materiasGlobalesSearchInput" type="text" placeholder="Buscar materias..." />
                    </div>
                </div>
                <button id="btnNuevaMateriaGlobal" class="toolbar-btn primary">Nueva materia</button>
            </div>

            <div class="materias-table-wrapper">
                <table class="materias-table">
                    <thead>
                        <tr>
                            <th>N°</th>
                            <th>Nombre</th>
                            <th>Sigla</th>
                            <th>Color</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="materiasGlobalesTableBody"></tbody>
                </table>
            </div>

            <div id="materiasGlobalesInlineMessage" class="message" style="display:none;"></div>
            <div id="materiasGlobalesPagination" class="pagination"></div>
        </div>
    </section>

    <!-- Sección: Horarios (Admin) -->
    <section id="adminHorariosSection" class="admin-horarios-section" hidden>
        <div class="admin-horarios-panel">
            <div class="admin-horarios-toolbar">
                <div class="admin-horarios-title">Horarios por aula</div>
                <div class="admin-horarios-filters">
                    <label for="adminHorariosDiaSelect">Día</label>
                    <select id="adminHorariosDiaSelect">
                        <option value="1">Lunes</option>
                        <option value="2">Martes</option>
                        <option value="3">Miércoles</option>
                        <option value="4">Jueves</option>
                        <option value="5">Viernes</option>
                        <option value="6">Sábado</option>
                    </select>
                </div>
            </div>
            <div class="admin-horarios-insight" id="adminHorariosInsight">
                <div class="admin-horarios-insight-header">
                    <span class="insight-label">Detalle del horario seleccionado</span>
                    <span class="insight-small" id="adminInsightDiaActual">Día actual: Lunes</span>
                </div>
                <div class="admin-horarios-insight-body">
                    <div class="insight-main">
                        <span id="adminInsightMateria">Pasa el mouse sobre un bloque para ver todos los detalles.</span>
                    </div>
                    <div class="insight-meta">
                        <div><span class="insight-meta-label">Docente:</span> <span id="adminInsightDocente">–</span></div>
                        <div><span class="insight-meta-label">Grupo:</span> <span id="adminInsightGrupo">–</span></div>
                        <div><span class="insight-meta-label">Aula:</span> <span id="adminInsightAula">–</span></div>
                        <div><span class="insight-meta-label">Horario:</span> <span id="adminInsightHorario">–</span></div>
                    </div>
                </div>
            </div>

            <div class="admin-horarios-wrapper horario-wrapper">
                <div class="admin-horarios-grid">
                    <div class="admin-horarios-times" id="adminHorariosTimes">
                        <!-- Horas se llenan desde JS para mantener una sola fuente -->
                    </div>
                    <div class="admin-horarios-columns-scroll">
                        <div class="admin-horarios-columns" id="adminHorariosColumns">
                            <!-- Columnas de aulas dinámicas -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección: Panel Auxiliar (solo rol auxiliar) -->
    <section id="panelAuxiliarSection" class="aux-panel-section" hidden>
        <div class="aux-schedule-section">
            <div class="aux-schedule-header">
                <h2>Mis auxiliaturas (como auxiliar)</h2>
                <p>Visualiza únicamente las auxiliaturas que dictas</p>
            </div>
            <div id="auxMateriasGrid" class="aux-materias-grid"></div>
        </div>
    </section>

    <!-- Sección: Votación / Inscripción (estudiante y auxiliar) -->
    <section id="votacionSection" class="votacion-section" hidden>
        <div class="votacion-card">
            <p class="votacion-subtitle">
                Ingresa el código de matriculación para inscribirte a una auxiliatura. Debajo podrás ver y gestionar las auxiliaturas en las que ya estás inscrito.
            </p>
            <div class="aux-matricula-card compact">
                <div class="aux-matricula-field">
                    <input id="votacionCodigoInput" type="text" class="aux-matricula-code-input" placeholder="1234">
                </div>
                <button type="button" id="votacionInscribirmeBtn" class="aux-matricula-black-btn">
                    Matricularme
                </button>
                <div id="votacionMessage" class="message" style="display:none;"></div>
            </div>

            <div id="votacionMisAuxiliaturas" class="votacion-mis-auxiliaturas">
                <h3 class="votacion-mis-title">Mis auxiliaturas matriculadas</h3>
                <p class="votacion-mis-subtitle">
                    Aquí verás todas las auxiliaturas en las que estás matriculado. Puedes quitarte de cualquiera cuando lo necesites.
                </p>
                <div id="votacionMisAuxiliaturasEmpty" class="votacion-mis-empty" style="display:none;"></div>
                <div class="users-table-wrapper">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>N°</th>
                                <th>Materia</th>
                                <th>Grupo</th>
                                <th>Auxiliar</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="votacionMisAuxiliaturasBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección: Subir Horario (Admin) -->
    <section id="uploadHorarioSection" class="upload-horario-section" hidden>
        <div class="upload-panel">
            <h2 class="upload-title">/Subir Horarios</h2>
            <p class="upload-subtitle">Gestión 2-2025</p>
            <p class="upload-description">
                El administrador deberá subir uno o varios archivos JSON de horarios con la estructura indicada para generar los horarios desde cero para esta gestión.
            </p>

            <div class="upload-dropzone" id="uploadDropzone">
                <div class="upload-dropzone-inner">
                    <div class="upload-icon-circle">
                        <span class="upload-icon-arrow">&#8593;</span>
                    </div>
                    <p class="upload-drop-main">Arrastra tus archivos JSON aquí</p>
                    <p class="upload-drop-secondary">o</p>
                    <button type="button" class="btn upload-select-btn" id="uploadSelectBtn">Seleccionar</button>
                    <input type="file" id="uploadFileInput" accept=".json" multiple hidden>
                </div>
            </div>

            <div id="uploadMessage" class="message" style="display:none;"></div>

            <div class="upload-files-list" id="uploadFilesList"></div>

            <div class="upload-actions">
                <button type="button" class="btn btn-primary upload-submit-btn" id="uploadSubmitBtn" disabled>
                    Actualizar Horarios
                </button>
            </div>
        </div>
    </section>

    <div class="dashboard-container">
        <div class="dashboard-summary admin-dashboard-summary" id="adminDashboardSummary">
            <div class="summary-cards-grid">
                <div class="summary-card admin-summary-usuarios">
                    <div class="summary-title">Usuarios totales</div>
                    <div class="summary-count" id="adminSummaryUsuariosTotal">0</div>
                </div>
                <div class="summary-card admin-summary-aulas">
                    <div class="summary-title">Aulas registradas</div>
                    <div class="summary-count" id="adminSummaryAulas">0</div>
                </div>
                <div class="summary-card admin-summary-materias-globales">
                    <div class="summary-title">Materias globales</div>
                    <div class="summary-count" id="adminSummaryMateriasGlobales">0</div>
                </div>
                <div class="summary-card admin-summary-horarios">
                    <div class="summary-title">Horarios importados</div>
                    <div class="summary-count" id="adminSummaryHorarios">0</div>
                </div>
            </div>
            <div class="summary-cards-grid admin-secondary-grid">
                <div class="summary-card admin-summary-estudiantes">
                    <div class="summary-title">Estudiantes</div>
                    <div class="summary-count" id="adminSummaryEstudiantes">0</div>
                </div>
                <div class="summary-card admin-summary-auxiliares">
                    <div class="summary-title">Auxiliares</div>
                    <div class="summary-count" id="adminSummaryAuxiliares">0</div>
                </div>
                <div class="summary-card admin-summary-admins">
                    <div class="summary-title">Administradores</div>
                    <div class="summary-count" id="adminSummaryAdmins">0</div>
                </div>
                <div class="summary-card admin-summary-carreras">
                    <div class="summary-title">Carreras</div>
                    <div class="summary-count" id="adminSummaryCarreras">0</div>
                </div>
            </div>
            <div class="admin-charts-row">
                <div class="admin-chart-card">
                    <div class="admin-chart-title">Distribución de usuarios</div>
                    <div class="admin-chart-bar-group">
                        <div class="admin-chart-bar-row">
                            <span class="admin-chart-bar-label">Estudiantes</span>
                            <div class="admin-chart-bar-track">
                                <div class="admin-chart-bar-fill role-estudiantes" id="adminChartEstudiantesBar"></div>
                            </div>
                            <span class="admin-chart-bar-number" id="adminChartEstudiantesValue">0</span>
                        </div>
                        <div class="admin-chart-bar-row">
                            <span class="admin-chart-bar-label">Auxiliares</span>
                            <div class="admin-chart-bar-track">
                                <div class="admin-chart-bar-fill role-auxiliares" id="adminChartAuxiliaresBar"></div>
                            </div>
                            <span class="admin-chart-bar-number" id="adminChartAuxiliaresValue">0</span>
                        </div>
                        <div class="admin-chart-bar-row">
                            <span class="admin-chart-bar-label">Administradores</span>
                            <div class="admin-chart-bar-track">
                                <div class="admin-chart-bar-fill role-admins" id="adminChartAdminsBar"></div>
                            </div>
                            <span class="admin-chart-bar-number" id="adminChartAdminsValue">0</span>
                        </div>
                    </div>
                </div>
                <div class="admin-chart-card">
                    <div class="admin-chart-title">Aulas vs horarios importados</div>
                    <div class="admin-chart-bar-group">
                        <div class="admin-chart-bar-row">
                            <span class="admin-chart-bar-label">Aulas</span>
                            <div class="admin-chart-bar-track">
                                <div class="admin-chart-bar-fill chart-aulas" id="adminChartAulasBar"></div>
                            </div>
                            <span class="admin-chart-bar-number" id="adminChartAulasValue">0</span>
                        </div>
                        <div class="admin-chart-bar-row">
                            <span class="admin-chart-bar-label">Horarios</span>
                            <div class="admin-chart-bar-track">
                                <div class="admin-chart-bar-fill chart-horarios" id="adminChartHorariosBar"></div>
                            </div>
                            <span class="admin-chart-bar-number" id="adminChartHorariosValue">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="dashboard-summary" id="dashboardSummary">
            <div class="summary-cards-grid">
                <div class="summary-card summary-materias">
                    <div class="summary-title">Materias Inscritas</div>
                    <div class="summary-count" id="summaryMaterias">0</div>
                </div>
                <div class="summary-card summary-auxiliaturas">
                    <div class="summary-title">Auxiliaturas Inscritas</div>
                    <div class="summary-count" id="summaryAuxiliaturas">0</div>
                </div>
                <div class="summary-card summary-notificaciones">
                    <div class="summary-title">Notificaciones / Alertas</div>
                    <div class="summary-count" id="summaryNotificaciones">0</div>
                </div>
                <div class="summary-card summary-choques">
                    <div class="summary-title">Choques de Horario</div>
                    <div class="summary-count" id="summaryChoques">0</div>
                </div>
            </div>
        </div>
        <!-- Horario del usuario -->
        <div class="horario-section">
            <div class="horario-toolbar">
                <button type="button" class="toolbar-btn primary" id="btnNuevaClase">+ Nueva clase</button>
                <button type="button" class="toolbar-btn secondary" id="btnGestionMaterias">Gestionar materias</button>
            </div>
            <div class="horario-wrapper">
                <div class="horario-grid">
                    <!-- Encabezado con días de la semana -->
                    <div class="time-column header-cell">
                        <button type="button" class="edit-toggle-button" id="btnToggleEdicionHorario">Editar</button>
                    </div>
                    <div class="day-header">Lunes</div>
                    <div class="day-header">Martes</div>
                    <div class="day-header">Miércoles</div>
                    <div class="day-header">Jueves</div>
                    <div class="day-header">Viernes</div>
                    <div class="day-header">Sábado</div>

                    <!-- Franjas horarias de 7:00 a 22:00 -->
                    <div class="time-slot">07:00 - 08:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="07:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="07:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="07:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="07:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="07:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="07:00"></div>

                    <div class="time-slot reducir-separacion">08:00 - 09:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="08:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="08:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="08:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="08:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="08:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="08:00"></div>

                    <div class="time-slot">09:00 - 10:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="09:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="09:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="09:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="09:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="09:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="09:00"></div>

                    <div class="time-slot reducir-separacion">10:00 - 11:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="10:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="10:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="10:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="10:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="10:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="10:00"></div>

                    <div class="time-slot">11:00 - 12:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="11:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="11:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="11:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="11:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="11:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="11:00"></div>

                    <div class="time-slot reducir-separacion">12:00 - 13:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="12:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="12:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="12:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="12:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="12:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="12:00"></div>

                    <div class="time-slot centrar-separacion">13:00 - 14:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="13:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="13:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="13:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="13:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="13:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="13:00"></div>

                    <div class="time-slot">14:00 - 15:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="14:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="14:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="14:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="14:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="14:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="14:00"></div>

                    <div class="time-slot reducir-separacion">15:00 - 16:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="15:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="15:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="15:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="15:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="15:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="15:00"></div>

                    <div class="time-slot">16:00 - 17:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="16:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="16:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="16:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="16:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="16:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="16:00"></div>

                    <div class="time-slot reducir-separacion">17:00 - 18:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="17:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="17:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="17:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="17:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="17:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="17:00"></div>

                    <div class="time-slot">18:00 - 19:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="18:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="18:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="18:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="18:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="18:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="18:00"></div>

                    <div class="time-slot reducir-separacion">19:00 - 20:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="19:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="19:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="19:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="19:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="19:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="19:00"></div>

                    <div class="time-slot">20:00 - 21:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="20:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="20:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="20:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="20:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="20:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="20:00"></div>

                    <div class="time-slot reducir-separacion">21:00 - 22:00</div>
                    <div class="schedule-cell" data-dia="1" data-hora="21:00"></div>
                    <div class="schedule-cell" data-dia="2" data-hora="21:00"></div>
                    <div class="schedule-cell" data-dia="3" data-hora="21:00"></div>
                    <div class="schedule-cell" data-dia="4" data-hora="21:00"></div>
                    <div class="schedule-cell" data-dia="5" data-hora="21:00"></div>
                    <div class="schedule-cell" data-dia="6" data-hora="21:00"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal agregar clase -->
    <div class="modal modal-add-class" id="addClassModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="addClassTitle">Agregar clase</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <form id="addClassForm" class="modal-body">
                <div id="addClassMessage" class="message" style="display:none;"></div>
                <input type="hidden" id="clase_id">
                <input type="hidden" id="dia_semana">
                <input type="hidden" id="hora_slot">

                <div class="form-group slot-summary">
                    <label>Bloque seleccionado</label>
                    <div id="slotResumen" class="slot-tag">Selecciona un bloque en el horario</div>
                </div>
                
                <div class="form-group">
                    <label for="materia">Materia</label>
                    <div class="inline-field">
                        <select id="materia" name="id_materia" required>
                            <option value="">Seleccionar materia</option>
                        </select>
                        <button type="button" class="btn-link" id="btnNuevaMateria">Nueva materia</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="dia_select">Día</label>
                    <select id="dia_select" name="dia_semana">
                        <option value="1">Lunes</option>
                        <option value="2">Martes</option>
                        <option value="3">Miércoles</option>
                        <option value="4">Jueves</option>
                        <option value="5">Viernes</option>
                        <option value="6">Sábado</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sigla">Sigla:</label>
                    <input id="sigla" name="sigla" type="text" placeholder="Ej: FIS100" required>
                </div>

                <div class="form-group">
                    <label for="docente">Docente:</label>
                    <input id="docente" name="docente" type="text" placeholder="Ej: R.GUTIERREZ" required>
                </div>

                <div class="form-group">
                    <label for="grupo">Grupo:</label>
                    <input id="grupo" name="grupo" type="text" placeholder="Ej: G1" required>
                </div>

                <div class="form-group">
                    <div class="time-inputs">
                        <div>
                            <label for="hora_inicio">Hora Inicio</label>
                            <input id="hora_inicio" name="hora_inicio" type="time" required>
                        </div>
                        <div>
                            <label for="hora_fin">Hora Fin</label>
                            <input id="hora_fin" name="hora_fin" type="time" required>
                        </div>
                    </div>
                    <div class="duration-info">
                        <strong>Duración:</strong> <span id="duration">2h</span><br>
                        <small>La clase se ajustará automáticamente en el horario</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="aula">Aula:</label>
                    <input id="aula" name="aula" type="text" placeholder="Ej: C001" required>
                </div>

                <div class="modal-footer space-between">
                    <button type="button" class="btn btn-delete" id="deleteClassBtn" style="display:none;">Eliminar</button>
                    <button type="button" class="btn btn-cancel" data-close-modal>Cancelar</button>
                    <button type="submit" class="btn btn-save">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal lista de materias -->
    <div class="modal modal-materias-list" id="materiasListModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Materias</h2>
                <div class="modal-actions">
                    <button type="button" class="btn btn-primary" id="btnNuevaMateriaModal">Nueva materia</button>
                    <button class="modal-close" data-close-modal>&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="materias-list-header">
                    <span>Materia</span>
                    <span>Sigla</span>
                    <span>Acciones</span>
                </div>
                <div id="materiasList" class="materias-list"></div>
            </div>
        </div>
    </div>

    <!-- Modal formulario de materia -->
    <div class="modal modal-materia" id="materiaFormModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Nueva materia</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <div id="materiaMessage" class="message" style="display:none;"></div>
                <form id="materiaForm" class="materia-form">
                    <input type="hidden" id="materia_id">
                    <div class="form-row split-row">
                        <div class="form-control">
                            <label for="materia_nombre">Nombre de la materia</label>
                            <input id="materia_nombre" type="text" placeholder="Ej: Programación Intermedia" required>
                        </div>
                        <div class="form-control sigla-control">
                            <label for="materia_sigla">Sigla</label>
                            <input id="materia_sigla" type="text" placeholder="Ej: FIS100" maxlength="12" required>
                        </div>
                    </div>
                    <div class="form-row split-row">
                        <div class="form-control">
                            <label for="materia_docente">Docente</label>
                            <input id="materia_docente" type="text" placeholder="Ej: R.GUTIERREZ">
                        </div>
                        <div class="form-control">
                            <label for="materia_grupo">Grupo</label>
                            <input id="materia_grupo" type="text" placeholder="Ej: G1">
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Color de la materia</label>
                        <div class="color-selector" id="materiaColorSelector" data-input-target="materia_color">
                            <div class="color-option selected" data-color="#2196F3" style="background:#2196F3;"></div>
                            <div class="color-option" data-color="#F44336" style="background:#F44336;"></div>
                            <div class="color-option" data-color="#4CAF50" style="background:#4CAF50;"></div>
                            <div class="color-option" data-color="#FF9800" style="background:#FF9800;"></div>
                            <div class="color-option" data-color="#9C27B0" style="background:#9C27B0;"></div>
                            <div class="color-option" data-color="#00BCD4" style="background:#00BCD4;"></div>
                            <div class="color-option" data-color="#FF5722" style="background:#FF5722;"></div>
                            <div class="color-option" data-color="#8BC34A" style="background:#8BC34A;"></div>
                        </div>
                        <div class="color-picker-row">
                            <label for="materia_color">Personalizar color</label>
                            <input type="color" id="materia_color" value="#2196F3">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="materiaSaveBtn">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal formulario de carrera -->
    <div class="modal modal-carrera" id="carreraFormModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Nueva carrera</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <div id="carreraMessage" class="message" style="display:none;"></div>
                <form id="carreraForm" class="materia-form">
                    <input type="hidden" id="carrera_id">
                    <div class="form-row">
                        <label for="carrera_nombre">Nombre de la carrera</label>
                        <input id="carrera_nombre" type="text" placeholder="Ej: Ingeniería de Sistemas" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal confirmar eliminación de carrera -->
    <div class="modal modal-confirm" id="confirmDeleteCarreraModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Eliminar carrera</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteCarreraText">¿Deseas eliminar esta carrera?</p>
                <div id="confirmDeleteCarreraMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteCarrera">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Crear/Editar Usuario (estilo de modales existentes) -->
    <div class="modal modal-user-form" id="userFormModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="userFormTitle">Nuevo usuario</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <form id="userForm" class="modal-body">
                <div id="userFormMessage" class="message" style="display:none;"></div>
                <input type="hidden" id="userId" />
                <div class="form-row">
                    <label>Nombre</label>
                    <input id="nombre" type="text" required />
                </div>
                <div class="form-row">
                    <label>Correo</label>
                    <input id="correo" type="email" required />
                </div>
                <div class="form-row">
                    <label>Carrera</label>
                    <input id="carrera" type="text" list="adminCarrerasList" />
                    <datalist id="adminCarrerasList"></datalist>
                </div>
                <div class="form-row">
                    <label>CU</label>
                    <input id="cu" type="text" />
                </div>
                <div class="form-row">
                    <label>Rol</label>
                    <select id="rol" required>
                        <option value="student">Estudiante</option>
                        <option value="assistant">Auxiliar</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="password">Contraseña (dejar en blanco para mantener la actual)</label>
                    <input id="password" type="password" placeholder="••••••••" />
                </div>
                <div class="modal-footer space-between">
                    <button type="button" class="btn-cancel" data-close-modal>Cancelar</button>
                    <button type="submit" class="btn-save">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Confirmar Eliminar Usuario -->
    <div class="modal modal-confirm" id="confirmDeleteUserModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2>Eliminar usuario</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="confirm-body modal-body">
                <p>¿Seguro que deseas eliminar este usuario?</p>
                <div id="confirmDeleteUserMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" data-close-modal>Cancelar</button>
                <button id="btnConfirmDeleteUser" class="btn-delete">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal detalle de clase -->
    <div class="modal" id="classDetailModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-detail">
            <div class="class-detail-card">
                <span class="detail-close" data-close-modal>&times;</span>
                <div class="detail-content">
                    <div class="detail-header">
                        <div class="detail-color-bar" id="detailColorBar"></div>
                        <h2 id="detailMateria">Materia</h2>
                    </div>
                    <ul class="detail-list">
                        <li><span class="detail-label">Sigla:</span> <span id="detailSigla"></span></li>
                        <li><span class="detail-label">Docente:</span> <span id="detailDocente"></span></li>
                        <li><span class="detail-label">Grupo:</span> <span id="detailGrupo"></span></li>
                    </ul>
                    <div class="detail-tag">
                        <span class="detail-label">Aula:</span>
                        <span id="detailAula" class="detail-badge"></span>
                    </div>
                    <div class="detail-footer">
                        <span id="detailHorario"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal editar perfil -->
    <div class="modal" id="profileModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2>Editar Perfil</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <form id="profileForm" class="modal-body">
                <div id="profileMessage" class="message" style="display:none;"></div>
                <div class="form-row">
                    <label for="p_nombre">Nombre Completo</label>
                    <input id="p_nombre" name="nombre_completo" type="text" required>
                </div>
                <div class="form-row">
                    <label for="p_carrera">Carrera</label>
                    <input id="p_carrera" name="carrera" type="text" list="profileCarrerasList">
                    <datalist id="profileCarrerasList"></datalist>
                </div>
                <div class="form-row">
                    <label for="p_cu">CU</label>
                    <input id="p_cu" name="cu" type="text">
                </div>
                <div class="form-row">
                    <label for="p_correo">Correo</label>
                    <input id="p_correo" name="correo" type="email" required>
                </div>
                <div class="form-row">
                    <label for="p_pass">Nueva contraseña (opcional)</label>
                    <input id="p_pass" name="contrasenia" type="password" placeholder="••••••••">
                </div>
                <div class="form-row">
                    <label>Rol</label>
                    <input id="p_rol" type="text" disabled>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal acciones de clase -->
    <div class="modal modal-class-actions" id="classActionsModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog">
            <div class="modal-header">
                <h2>Gestionar clase</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body class-actions-body">
                <div class="class-actions-header">
                    <div class="class-actions-color" id="classActionsColor"></div>
                    <div>
                        <h3 id="classActionsMateria">Materia</h3>
                        <div class="class-actions-meta">
                            <div><span id="classActionsDocente">Docente</span> • <span id="classActionsGrupo">G1</span></div>
                            <div id="classActionsHorario">Lunes · 09:00 - 11:00</div>
                        </div>
                    </div>
                </div>
                <div class="class-actions-buttons">
                    <button type="button" class="btn btn-outline" id="classActionAdd">+ Añadir otra clase</button>
                    <button type="button" class="btn btn-save" id="classActionEdit">Editar clase</button>
                    <button type="button" class="btn btn-delete" id="classActionDelete">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal confirmar eliminación de clase -->
    <div class="modal modal-confirm" id="confirmDeleteClassModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Eliminar clase</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteClassText">¿Deseas eliminar esta clase?</p>
                <div id="confirmDeleteClassMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteClass">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal confirmar eliminación de materia -->
    <div class="modal modal-confirm" id="confirmDeleteMateriaModal" aria-hidden="true">
        <div class="modal-backdrop" data-close-modal></div>
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h2>Eliminar materia</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body confirm-body">
                <p id="confirmDeleteMateriaText">¿Deseas eliminar esta materia?</p>
                <div id="confirmDeleteMateriaMessage" class="message" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="button" class="btn btn-delete" id="btnConfirmDeleteMateria">Eliminar</button>
            </div>
        </div>
    </div>

    <script src="../../scripts/shared/load-header.js"></script>
    <script src="../../scripts/shared/carreras-autocomplete.js"></script>
    <script src="../../scripts/dashboard/dashboard.js"></script>
    <script src="../../scripts/dashboard/usuarios-roles-section.js"></script>
    <script src="../../scripts/dashboard/admin-aulas-section.js"></script>
    <script src="../../scripts/dashboard/admin-carreras-section.js"></script>
    <script src="../../scripts/dashboard/admin-materias-globales-section.js"></script>
    <script src="../../scripts/dashboard/panel-auxiliar-section.js"></script>
    <script src="../../scripts/dashboard/admin-horarios-section.js"></script>
    <script src="../../scripts/dashboard/upload-horario-section.js"></script>
    <script src="../../scripts/dashboard/votacion-section.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="../../scripts/dashboard/socket-client.js"></script>
  </body>
  </html>
